# Real-Time kernel configuration for Raspberry Pi
# This enables PREEMPT_RT-style features where available

# Enable fully preemptible kernel
CONFIG_PREEMPT=y
CONFIG_PREEMPT_COUNT=y
CONFIG_PREEMPT_RCU=y

# IRQ subsystem optimizations
CONFIG_IRQ_FORCED_THREADING=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_HZ_1000=y

# Timer frequency for better real-time performance
CONFIG_TICK_CPU_ACCOUNTING=y
CONFIG_VIRT_CPU_ACCOUNTING_GEN=y

# Disable mitigations for better real-time performance (use only in trusted environments)
# CONFIG_HARDEN_BRANCH_PREDICTOR=n
# CONFIG_HARDEN_USERCOPY=n

# Real-time scheduling improvements
CONFIG_RT_GROUP_SCHED=y
CONFIG_CGROUP_SCHED=y

# Latency tracking
CONFIG_LATENCYTOP=y
CONFIG_SCHED_DEBUG=y

# Kernel preemption model (set to 'Full' for real-time)
# Choose: None, Voluntary, or Full Preemptible Kernel
CONFIG_PREEMPT_DYNAMIC=y

# PREEMPT_RT specific options (automatically enabled when RT patches are applied)
# CONFIG_PREEMPT_RT=y
# CONFIG_MIGRATION=n
# CONFIG_COMPAT=n

